!function(t){function e(t){var e=t.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return e&&11===e[2].length?e[2]:!1}function n(t){var n=e(t);return t&&n&&(t="https://www.youtube.com/embed/"+e(t)),t}function u(t,e,n){var u;return n?(u='width="'+t+'" height="'+e+'"','<div class="youtube-container"><iframe class="embed-responsive-item" '+u+' src="'+n+'" frameborder="0" allowfullscreen>&nbsp;</iframe></div>'):void 0}function a(){var e,a="",i=t("#youtubeAutoplay").is(":checked"),o=t("#youtubeControls").is(":checked"),r=t("#youtubeWidth").val(),c=t("#youtubeHeight").val(),l=n(t("#youtubeID").val());return a+="?rel=0",a+="&showinfo=0",a+="&modestbranding=1",a+=o?"&controls=1":"&controls=0",i&&(a+="&autoplay=1"),l&&(e=u(r,c,l+a)),e}function i(){t("#preview").html(u(750,315,n(t("#youtubeID").val())))}function o(t){clearTimeout(l),l=setTimeout(i,t||1e3)}function r(){var t=a();t&&parent.tinymce.activeEditor.insertContent(t),parent.tinymce.activeEditor.windowManager.close()}function c(){t("#preview").length&&t("#youtubeID").keypress(function(){o()}).change(function(){o(100)})}var l;t(function(){var e={youtubeurl:parent.tinymce.util.I18n.translate("Youtube URL"),youtubeID:parent.tinymce.util.I18n.translate("Youtube ID"),youtubeWidth:parent.tinymce.util.I18n.translate("width"),youtubeHeight:parent.tinymce.util.I18n.translate("height"),youtubeAutoplay:parent.tinymce.util.I18n.translate("autoplay"),youtubeHD:parent.tinymce.util.I18n.translate("HD video"),youtubeREL:parent.tinymce.util.I18n.translate("Related video"),youtubeControls:parent.tinymce.util.I18n.translate("Player Controls"),cancel:parent.tinymce.util.I18n.translate("cancel"),Insert:parent.tinymce.util.I18n.translate("Insert")};t.get("view/forms.html",function(n){t("#template-container").append(Mustache.render(n,e)),c(),t("#insert-btn").on("click",r),t("#close-btn").on("click",function(){parent.tinymce.activeEditor.windowManager.close()})})})}(jQuery);